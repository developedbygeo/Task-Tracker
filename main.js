(()=>{"use strict";function e(e){e.value=""}function t(){const e=document.querySelector(".main-section");for(;e.firstChild;)e.removeChild(e.firstChild)}class n{static count=0;#e;constructor(e,t,r="",o=""){this.id=n.count++,this.title=e,this.description=t,this.date=r,this.priority=o,this.#e="active"}static resetCount(){n.count=0}get keys(){return Object.keys(this)}get state(){return this.#e}set newState(e){this.#e=e}render(){const e=document.querySelector(".main-section"),t=document.querySelector("template").content.cloneNode(!0),n=t.childNodes[0].nextSibling,r=t.querySelector(".header-wrapper h3"),o=t.querySelector(".info-desc p"),c=t.querySelector(".d-wrap p"),i=t.querySelector(".prio-wrap p");[r.textContent,o.textContent,c.textContent,i.textContent]=[this.title,this.description,this.date,this.priority],n.classList.add(`item${this.id}`),e.appendChild(t)}remove(){var e;e=this.id,document.querySelector(`.item${e}`).remove(),this.newState="deleted",this.keys.forEach((e=>delete this[e]))}enableButton(){var e;e=this.id,document.querySelector(`.item${e} button`).addEventListener("click",h)}get keys(){return Object.keys(this)}remove(){this.keys.forEach((e=>delete this[e]))}}class r{constructor(e,t){this.key=e,this.value=t}}function o(){const e=[],t=[];return document.querySelectorAll(".project").forEach((n=>{const o=n.textContent,i=c(o);e.push(i),e.forEach((e=>{e.forEach((e=>{const{title:n}=e,c=new r(`${o}`,`${n}`);t.push(c)}))}))})),t}function c(e){let t=JSON.parse(localStorage.getItem(`${e}-TD`));return null===t?[]:t}function i(e){if(e){if(!Array.isArray(e)){const{title:t,description:r,date:o,priority:c}=e,i=new n(`${t}`,`${r}`,o,c);return i.render(),void i.enableButton()}e.forEach((e=>{const{title:t,description:r,date:o,priority:c}=e,i=new n(`${t}`,`${r}`,o,c);i.render(),i.enableButton()}))}}function s(e,t,n=t,r=t){const o=document.createElement(e),c=[`${t}`,`${n}`,`${r}`];return o.classList.add(...c),o}function l(){const e=[];for(let t=0;t<localStorage.length;t++)if(localStorage.key(t).includes("-TD")){const n=localStorage.key(t);e.push(n.replace("-TD",""))}return e}function u(){const r=document.querySelector("#search"),i=function(e,t=e){const n=o().filter((t=>t.value===e));if(0!==n.length)return c(n[0].key).filter((t=>t.title===e))[0]}(r.value);e(r),function(e){const r=document.querySelector(".current");if(void 0===e)return t(),void(r.textContent="No matches found");const{title:o,description:c,date:i,priority:s}=e;r.textContent="Search Result",t();const l=new n(o,c,i,s);l.render(),l.enableButton()}(i)}function a(){document.querySelector(".nav").classList.toggle("nav-active")}function d(){document.querySelector(".menu-add").classList.toggle("menu-add-active")}function h(){const e=this.offsetParent,n=this.offsetParent.children[1].children[0].textContent,r=document.querySelector(".current").textContent;e.classList.toggle("check-active"),function(e,n){const r=c(e);if(!Array.isArray(r))return void localStorage.removeItem(`${e}-TD`);if(1===r.length)return void localStorage.removeItem(`${e}-TD`);const s=r.filter((e=>e.title!==n));t(),i(s),localStorage.setItem(`${e}-TD`,JSON.stringify(s)),o()}(r,n)}function m(){const t=document.querySelector(".current");let r=[];const o=document.querySelectorAll(".menu-add input"),i=document.querySelector("#priority");o.forEach((e=>r.push(e.value))),r.push(i.value);const s=new n(...r);!function(e,t){let n=[];n=Array.isArray(c(t))?null===c(t)?[]:[...c(t)]:[c(t)],n.push(e),localStorage.setItem(`${t}-TD`,JSON.stringify(n))}(s,t.textContent),s.render(),s.enableButton(),function(t,n=t){t.forEach((t=>e(t))),e(n)}(o,i),this.offsetParent.classList.remove("menu-add-active")}function y(){const t=this.offsetParent.children[2],n=this.previousElementSibling;if(n.value.length<1)return void(n.style.border="2px solid red");n.style.border="";const r=s("li","project",`${n.value}`);r.textContent=n.value,r.addEventListener("click",v,!0),t.appendChild(r),e(n)}function f(){const e=document.querySelector(".current").textContent,t=document.querySelector(".default-project"),n=document.querySelector(".warning-wrapper");var r;document.querySelector(`.${e}`).style.display="none",n.classList.remove("warning-wrapper-active"),r=e,localStorage.removeItem(r),t.click()}function v(){const e=document.querySelector(".current");var n;this.classList.add("active-project"),e.textContent=this.textContent,a(),n=this,document.querySelectorAll(".project").forEach((e=>{e!==n&&e.classList.remove("active-project")})),t();const r=c(`${this.textContent}`);null!==r?i(r):t()}function p(){const e=document.querySelector(".current"),t=document.querySelector(".nav ul"),n=s("li","project","default-project");n.textContent=e.textContent="Tasks",n.classList.add("active-project"),n.addEventListener("click",v,!0),t.appendChild(n),i(c(`${n.textContent}`))}function S(){const e=document.querySelector(".nav ul");l().length<1||l().forEach((t=>{if("Tasks"===t)return;const n=s("li","project",`${t}`);n.textContent=t,n.addEventListener("click",v,!0),e.appendChild(n)}))}function q(){const e=document.querySelector(".current").textContent,t=document.querySelector(".warning-wrapper"),n=document.querySelector(".warn-item");"Tasks"!==e&&"Search Result"!==e&&(n.textContent=e,t.classList.toggle("warning-wrapper-active"))}!function(){const e=document.querySelector("#search"),t=document.querySelector(".toggle"),n=document.querySelector(".close"),r=document.querySelector(".add"),c=document.querySelector(".decline"),i=document.querySelector(".accept"),s=document.querySelector(".add-new-list"),l=document.querySelector(".clear"),h=document.querySelector(".warn-confirm"),v=document.querySelector(".warn-decline");t.addEventListener("click",a),n.addEventListener("click",a),r.addEventListener("click",d),c.addEventListener("click",d),i.addEventListener("click",m),s.addEventListener("click",y),window.addEventListener("load",p,!0),window.addEventListener("load",S),window.addEventListener("load",o),h.addEventListener("click",f),l.addEventListener("click",q),v.addEventListener("click",q),e.addEventListener("change",u)}()})();